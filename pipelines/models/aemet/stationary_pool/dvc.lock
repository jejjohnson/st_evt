schema: '2.0'
stages:
  aemet_stations_mcmc_train:
    cmd: python st_evt/_src/modules/models/aemet/st_gevd_stationary_iid.py train-model-gevd-mcmc
      --dataset-path 'data/ml_ready/aemet/t2max_stations_bm_summer.zarr' --save-path
      'data/ml_results/aemet/t2max/gevd_stationary_iid/mcmc/' --variable 't2max_bm_year'
      --covariate 'gmst' --num-mcmc-samples 1_000 --num-chains 4 --num-mcmc-warmup
      10_000 --num-map-warmup 100_000
    deps:
    - path: data/ml_ready/aemet/t2max_stations_bm_summer.zarr
      hash: md5
      md5: a18045cb702634b449bc05c867b9195c.dir
      size: 172304
      nfiles: 36
    - path: st_evt/_src/modules/models/aemet/st_gevd_stationary_iid.py
      hash: md5
      md5: 6db86670fd53cc4d94622bb859474681
      size: 5738
    outs:
    - path: data/ml_results/aemet/t2max/gevd_stationary_iid/mcmc/az_nonstationary.zarr
      hash: md5
      md5: 4e11a6b6142b67205b0cf4c5f1f2a76c
      size: 131595793
    - path: data/ml_results/aemet/t2max/gevd_stationary_iid/mcmc/az_posterior_params.yaml
      hash: md5
      md5: 12039c01fe37fb77f1a063859c0988ed
      size: 42709057
  aemet_t2m_stations_spain_mcmc_train:
    cmd: python st_evt/_src/modules/models/aemet/gevd_stationary_iid/model.py train-model-gevd-mcmc
      --dataset-path 'data/ml_ready/aemet/t2max_stations_bm_summer.zarr' --save-path
      'data/ml_results/aemet/t2max/spain/gevd_stationary_iid/mcmc/' --variable 't2max'
      --covariate 'gmst' --num-mcmc-samples '1000' --num-chains '4' --num-mcmc-warmup
      '1000' --num-map-warmup '30000'
    deps:
    - path: data/ml_ready/aemet/t2max_stations_bm_summer.zarr
      hash: md5
      md5: 3956587251376c26b358ac9b11820d7f.dir
      size: 169972
      nfiles: 30
    - path: st_evt/_src/modules/models/aemet/gevd_stationary_iid/model.py
      hash: md5
      md5: 9498b8922553836c28d364121c8951e0
      size: 8288
    outs:
    - path: data/ml_results/aemet/t2max/spain/gevd_stationary_iid/mcmc/az_nonstationary.zarr
      hash: md5
      md5: c1014b92254dd792d8b64ea582474d1d
      size: 261908192
    - path: 
        data/ml_results/aemet/t2max/spain/gevd_stationary_iid/mcmc/az_posterior_params.yaml
      hash: md5
      md5: 0fd438634e9f6ce37103a91947eec0c5
      size: 42710172
  aemet_pr_stations_spain_mcmc_train:
    cmd: python st_evt/_src/modules/models/aemet/gevd_stationary_iid/model.py train-model-gevd-mcmc
      --dataset-path 'data/ml_ready/aemet/pr_stations_bm_fall.zarr' --save-path 'data/ml_results/aemet/pr/spain/gevd_stationary_iid/mcmc/'
      --variable 'pr' --covariate 'gmst' --num-mcmc-samples '1000' --num-chains '4'
      --num-mcmc-warmup '1000' --num-map-warmup '30000'
    deps:
    - path: data/ml_ready/aemet/pr_stations_bm_fall.zarr
      hash: md5
      md5: b92a904db60f4ba0ca7e28748dd76eca.dir
      size: 268719
      nfiles: 31
    - path: st_evt/_src/modules/models/aemet/gevd_stationary_iid/model.py
      hash: md5
      md5: 9498b8922553836c28d364121c8951e0
      size: 8288
    outs:
    - path: data/ml_results/aemet/pr/spain/gevd_stationary_iid/mcmc/az_nonstationary.zarr
      hash: md5
      md5: 5c1ab4394e2540319d93fae954a4b729
      size: 253570216
    - path: data/ml_results/aemet/pr/spain/gevd_stationary_iid/mcmc/az_posterior_params.yaml
      hash: md5
      md5: 20f899c3bdfde543aabfadbb589a84cd
      size: 40046100
  aemet_t2m_stations_spain_mcmc_evaluate_station:
    cmd: python st_evt/_src/modules/models/aemet/st_gevd_stationary_iid.py evaluate-model-gevd-mcmc
      --dataset-path 
      'data/ml_results/aemet/t2max/spain/gevd_stationary_iid/mcmc/az_nonstationary.zarr'
      --save-path 'data/viz/aemet/t2max/spain/8414A/gevd_stationary_iid/mcmc/' --variable
      't2max' --covariate 'gmst' --station-id "8414A"
    deps:
    - path: data/ml_results/aemet/t2max/spain/gevd_stationary_iid/mcmc/az_nonstationary.zarr
      hash: md5
      md5: e053c4deafedde3f86f5ba919c1fc1a2
      size: 753242
    - path: st_evt/_src/modules/models/aemet/st_gevd_stationary_iid.py
      hash: md5
      md5: de0e550735d51a2a7a2ad6e885dc64fc
      size: 16374
    outs:
    - path: 
        data/viz/aemet/t2max/spain/8414A/gevd_stationary_iid/mcmc/metrics/mae_density.png
      hash: md5
      md5: 49b9e42cb7c9a48318036d142e739e8f
      size: 42076
    - path: data/viz/aemet/t2max/spain/8414A/gevd_stationary_iid/mcmc/metrics/qq_plot.png
      hash: md5
      md5: 973ceae2d08a58200c6348e11a8b9a57
      size: 74392
    - path: 
        data/viz/aemet/t2max/spain/8414A/gevd_stationary_iid/mcmc/metrics/rmse_density.png
      hash: md5
      md5: 22ed0f087b71f421dca0017e8e140dc0
      size: 42764
    - path: data/viz/aemet/t2max/spain/8414A/gevd_stationary_iid/mcmc/params/joint.png
      hash: md5
      md5: 834f0e81e49e21526fbd95e33ef6c1ae
      size: 190362
    - path: data/viz/aemet/t2max/spain/8414A/gevd_stationary_iid/mcmc/params/trace.png
      hash: md5
      md5: 53f220c4b3ec5da164df385ba56c176e
      size: 77753
    - path: 
        data/viz/aemet/t2max/spain/8414A/gevd_stationary_iid/mcmc/returns/rl100_density.png
      hash: md5
      md5: d06e40cf9eeea82ad924e2ad5ea17db9
      size: 51551
    - path: data/viz/aemet/t2max/spain/8414A/gevd_stationary_iid/mcmc/returns/rp_vs_obs.png
      hash: md5
      md5: e60a51bcf47e98dccb7608e75d428a02
      size: 85102
  aemet_t2m_stations_spain_mcmc_evaluate_station@8414A:
    cmd: python st_evt/_src/modules/models/aemet/gevd_stationary_iid/post_analysis.py
      evaluate-model-gevd-mcmc-station --dataset-path 
      'data/ml_results/aemet/t2max/spain/gevd_stationary_iid/mcmc/az_nonstationary.zarr'
      --save-path 'data/viz/aemet/t2max/8414A/gevd_stationary_iid/mcmc/' --variable
      't2max' --covariate 'gmst' --station-id "8414A"
    deps:
    - path: data/ml_results/aemet/t2max/spain/gevd_stationary_iid/mcmc/az_nonstationary.zarr
      hash: md5
      md5: c1014b92254dd792d8b64ea582474d1d
      size: 261908192
    - path: st_evt/_src/modules/models/aemet/gevd_stationary_iid/post_analysis.py
      hash: md5
      md5: dedabd69d627fbb7952208e5b77af8a5
      size: 19648
    outs:
    - path: data/viz/aemet/t2max/8414A/gevd_stationary_iid/mcmc/metrics/mae_density.png
      hash: md5
      md5: e066e0726c336b5c4dd06419ee8a3705
      size: 59038
    - path: data/viz/aemet/t2max/8414A/gevd_stationary_iid/mcmc/metrics/qq_plot.png
      hash: md5
      md5: 6581b1992bd1855060e0454f0e9e3e0a
      size: 92444
    - path: data/viz/aemet/t2max/8414A/gevd_stationary_iid/mcmc/metrics/rmse_density.png
      hash: md5
      md5: c9b0c2908cf355dad5bceffa680572c0
      size: 60662
    - path: data/viz/aemet/t2max/8414A/gevd_stationary_iid/mcmc/params/joint.png
      hash: md5
      md5: 2a3e9a2aa6cf332b02b2d0a34282c6b7
      size: 195130
    - path: data/viz/aemet/t2max/8414A/gevd_stationary_iid/mcmc/params/trace.png
      hash: md5
      md5: 597d1e5bff2e443c5f5cfbe0f6f9dcaf
      size: 261310
    - path: data/viz/aemet/t2max/8414A/gevd_stationary_iid/mcmc/returns/rl100_density.png
      hash: md5
      md5: e552a58c4845583277afc5f742de3611
      size: 52401
    - path: data/viz/aemet/t2max/8414A/gevd_stationary_iid/mcmc/returns/rp_vs_obs.png
      hash: md5
      md5: 7fc4fcbaaa00b0b0edad2fd77c746a4c
      size: 94614
  aemet_t2m_stations_spain_mcmc_evaluate_station@3129A:
    cmd: python st_evt/_src/modules/models/aemet/gevd_stationary_iid/post_analysis.py
      evaluate-model-gevd-mcmc-station --dataset-path 
      'data/ml_results/aemet/t2max/spain/gevd_stationary_iid/mcmc/az_nonstationary.zarr'
      --save-path 'data/viz/aemet/t2max/3129A/gevd_stationary_iid/mcmc/' --variable
      't2max' --covariate 'gmst' --station-id "3129A"
    deps:
    - path: data/ml_results/aemet/t2max/spain/gevd_stationary_iid/mcmc/az_nonstationary.zarr
      hash: md5
      md5: c1014b92254dd792d8b64ea582474d1d
      size: 261908192
    - path: st_evt/_src/modules/models/aemet/gevd_stationary_iid/post_analysis.py
      hash: md5
      md5: dedabd69d627fbb7952208e5b77af8a5
      size: 19648
    outs:
    - path: data/viz/aemet/t2max/3129A/gevd_stationary_iid/mcmc/metrics/mae_density.png
      hash: md5
      md5: f4ca66e2a5a7d83c35006c468efabcec
      size: 56830
    - path: data/viz/aemet/t2max/3129A/gevd_stationary_iid/mcmc/metrics/qq_plot.png
      hash: md5
      md5: 3814d441467d8558d7cfd278e8233ccf
      size: 92831
    - path: data/viz/aemet/t2max/3129A/gevd_stationary_iid/mcmc/metrics/rmse_density.png
      hash: md5
      md5: c53e55682d6d274243be84fd52884940
      size: 58319
    - path: data/viz/aemet/t2max/3129A/gevd_stationary_iid/mcmc/params/joint.png
      hash: md5
      md5: aee56393e39264fbf144842ee185d9b0
      size: 184223
    - path: data/viz/aemet/t2max/3129A/gevd_stationary_iid/mcmc/params/trace.png
      hash: md5
      md5: 0e27c10d13e13a7e326339251155274e
      size: 256513
    - path: data/viz/aemet/t2max/3129A/gevd_stationary_iid/mcmc/returns/rl100_density.png
      hash: md5
      md5: d025499c2333204cdecefa18606457d3
      size: 50713
    - path: data/viz/aemet/t2max/3129A/gevd_stationary_iid/mcmc/returns/rp_vs_obs.png
      hash: md5
      md5: 53fe3e72195d96907b10edc0b2fc32cf
      size: 92163
  aemet_pr_stations_spain_mcmc_evaluate_station@8414A:
    cmd: python st_evt/_src/modules/models/aemet/gevd_stationary_iid/post_analysis.py
      evaluate-model-gevd-mcmc-station --dataset-path 'data/ml_results/aemet/pr/spain/gevd_stationary_iid/mcmc/az_nonstationary.zarr'
      --save-path 'data/viz/aemet/pr/8414A/gevd_stationary_iid/mcmc/' --variable 'pr'
      --covariate 'gmst' --station-id "8414A"
    deps:
    - path: data/ml_results/aemet/pr/spain/gevd_stationary_iid/mcmc/az_nonstationary.zarr
      hash: md5
      md5: 5c1ab4394e2540319d93fae954a4b729
      size: 253570216
    - path: st_evt/_src/modules/models/aemet/gevd_stationary_iid/post_analysis.py
      hash: md5
      md5: ec1d6133142d0aa7a6a0790d02a4efc7
      size: 19562
    outs:
    - path: data/viz/aemet/pr/8414A/gevd_stationary_iid/mcmc/metrics/mae_density.png
      hash: md5
      md5: a1a144a5842472b14eb1a8535bd184c2
      size: 55910
    - path: data/viz/aemet/pr/8414A/gevd_stationary_iid/mcmc/metrics/qq_plot.png
      hash: md5
      md5: 8bebf8e3e577a6ca1f12bccbbdf17c4e
      size: 115698
    - path: data/viz/aemet/pr/8414A/gevd_stationary_iid/mcmc/metrics/rmse_density.png
      hash: md5
      md5: 6f327eab0efae2b97f79030cfac000ce
      size: 54219
    - path: data/viz/aemet/pr/8414A/gevd_stationary_iid/mcmc/params/joint.png
      hash: md5
      md5: 84712502df68313182652e6be782b843
      size: 181053
    - path: data/viz/aemet/pr/8414A/gevd_stationary_iid/mcmc/params/trace.png
      hash: md5
      md5: 2c89fa9a6e7f460a452c6ff8fc7e3f35
      size: 260710
    - path: data/viz/aemet/pr/8414A/gevd_stationary_iid/mcmc/returns/rl100_density.png
      hash: md5
      md5: f72694afbbced349982d39723461632e
      size: 79001
    - path: data/viz/aemet/pr/8414A/gevd_stationary_iid/mcmc/returns/rp_vs_obs.png
      hash: md5
      md5: 49169fa75beac12767906816f7017c69
      size: 99746
  aemet_t2m_stations_spain_mcmc_evaluate_region:
    cmd: python st_evt/_src/modules/models/aemet/gevd_stationary_iid/post_analysis.py
      evaluate-model-gevd-mcmc-spain --dataset-path 
      'data/ml_results/aemet/t2max/spain/gevd_stationary_iid/mcmc/az_nonstationary.zarr'
      --save-path 'data/viz/aemet/t2max/spain/gevd_stationary_iid/mcmc/' --variable
      't2max' --covariate 'gmst'
    deps:
    - path: data/ml_results/aemet/t2max/spain/gevd_stationary_iid/mcmc/az_nonstationary.zarr
      hash: md5
      md5: c1014b92254dd792d8b64ea582474d1d
      size: 261908192
    - path: st_evt/_src/modules/models/aemet/gevd_stationary_iid/post_analysis.py
      hash: md5
      md5: dedabd69d627fbb7952208e5b77af8a5
      size: 19648
    outs:
    - path: data/viz/aemet/t2max/spain/gevd_stationary_iid/mcmc/nll/nll_covariates_alt.png
      hash: md5
      md5: be0284c58dd47e44afaac1ca64d18f7c
      size: 38582
    - path: data/viz/aemet/t2max/spain/gevd_stationary_iid/mcmc/nll/nll_covariates_lat.png
      hash: md5
      md5: c3562c3ee5b0b66aabba4c80f67688da
      size: 43759
    - path: data/viz/aemet/t2max/spain/gevd_stationary_iid/mcmc/nll/nll_covariates_lon.png
      hash: md5
      md5: be0284c58dd47e44afaac1ca64d18f7c
      size: 38582
    - path: data/viz/aemet/t2max/spain/gevd_stationary_iid/mcmc/nll/nll_density.png
      hash: md5
      md5: 41e181b46535f2f957cc0b35101edc07
      size: 59579
    - path: data/viz/aemet/t2max/spain/gevd_stationary_iid/mcmc/nll/nll_map.png
      hash: md5
      md5: e31a9435af5d3374724f7d10833d7641
      size: 120135
  aemet_pr_stations_spain_mcmc_evaluate_region:
    cmd: python st_evt/_src/modules/models/aemet/gevd_stationary_iid/post_analysis.py
      evaluate-model-gevd-mcmc-spain --dataset-path 'data/ml_results/aemet/pr/spain/gevd_stationary_iid/mcmc/az_nonstationary.zarr'
      --save-path 'data/viz/aemet/pr/spain/gevd_stationary_iid/mcmc/' --variable 'pr'
      --covariate 'gmst'
    deps:
    - path: data/ml_results/aemet/pr/spain/gevd_stationary_iid/mcmc/az_nonstationary.zarr
      hash: md5
      md5: 5c1ab4394e2540319d93fae954a4b729
      size: 253570216
    - path: st_evt/_src/modules/models/aemet/gevd_stationary_iid/post_analysis.py
      hash: md5
      md5: d4ed613c05ee2bc0d39f8e2a41cb414a
      size: 19895
    outs:
    - path: data/viz/aemet/pr/spain/gevd_stationary_iid/mcmc/nll/nll_covariates_alt.png
      hash: md5
      md5: 6286a38c45b4cead8891dfb07edb7edb
      size: 39933
    - path: data/viz/aemet/pr/spain/gevd_stationary_iid/mcmc/nll/nll_covariates_lat.png
      hash: md5
      md5: 810413905afdab64f21aba31fabdb230
      size: 37343
    - path: data/viz/aemet/pr/spain/gevd_stationary_iid/mcmc/nll/nll_covariates_lon.png
      hash: md5
      md5: 6286a38c45b4cead8891dfb07edb7edb
      size: 39933
    - path: data/viz/aemet/pr/spain/gevd_stationary_iid/mcmc/nll/nll_density.png
      hash: md5
      md5: fe1e80791833815b3e896e385c0f5c23
      size: 64428
    - path: data/viz/aemet/pr/spain/gevd_stationary_iid/mcmc/nll/nll_map.png
      hash: md5
      md5: 40285e7c08ee7d6152f78bc23e9041cf
      size: 109539
